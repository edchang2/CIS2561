<html>
<script language="javascript">
var canvas;
var backgroundImg = new Image();
var snail1Img = new Image();
var snail2Img = new Image();
var snail3Img = new Image();

var PLAYING = 0;
var GAME_OVER = 1;
var gameState = GAME_OVER;

var snail1;
var snail2;
var snail3;

//defines a snail
class Snail
{
	//build a snail
	constructor(x, y, img)
	{
		this.x = x;
		this.y = y;
		this.img = img;
		
		this.Draw = function (context) {
			context.drawImage(img, x - img.width/2, y - img.height/2);
		}
		
		this.Move = function () {
			x += Math.random() * 3 + 5;
		}
	}
	
}

//top level functions
//use this to "construct" the program
function OnLoad()
{
	//load images
	backgroundImg.src = "image_track.png";
	snail1Img.src = "snail1.png";
	snail2Img.src = "snail2.png";
	snail3Img.src = "snail3.png";
	
	//create snails
	snail1 = new Snail(50,50,snail1Img);
	snail2 = new Snail(50,125,snail2Img);
	snail3 = new Snail(50,200,snail3Img);
	
	//setup key press functions
	
	window.onkeyup = function(e) {
	
		if (gameState != GAME_OVER)
		{
			var key = e.keyCode ? e.keyCode : e.which;

			if (key == 68) { //'d'
			} else if (key == 65) { //'a'
				snail1.Move();
			} else if (key == 87) { //'s'
			
			} else if (key == 83) { //'w'
			
			}
		}
		else {
			ResetGame();
		}
	}//end keyup

	DrawGame();
	setInterval(Timer, 100);
}

function Timer()
{
	UpdateGame();
	DrawGame();
}

function DrawGame()
{
	//clear canvas
	canvas = document.getElementById("canvas");
	ctx = canvas.getContext("2d");
	
	//clobber the whole canvas
	//ctx.fillRect(0,0, canvas.width, canvas.height);
	
	ctx.drawImage(backgroundImg, 0, 0);
	
	snail1.Draw(ctx);
	snail2.Draw(ctx);
	snail3.Draw(ctx);	
}

function UpdateGame()
{
	if (gameState != GAME_OVER)
	{
		
	}
}


function MovePlayer()
{

}




function ResetGame()
{
	gameState = PLAYING;
}

</script>
<body onLoad="javascript:OnLoad();">
<center>
<canvas id="canvas" width="1000" height="400" style="background:#000000">
</center>
</canvas>



</div>
</body>
</html>